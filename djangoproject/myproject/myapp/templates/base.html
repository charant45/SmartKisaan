{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Smart Market | AI Powered Farming</title>
    <link rel="stylesheet" href="{% static 'myapp/css/base.css' %}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
    body {
        display: flex;
        flex-direction: column;
        min-height: 100vh;
        margin: 0;    
    }
    main {
        flex: 1;
        padding-top: 80px; 
    }
    header {
        position: fixed;
        top: 0;
        width: 100%;
        background: rgba(255, 255, 255, 0.95);
        backdrop-filter: blur(6px);
        box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 18px 40px;
        z-index: 1000;
    }
    
    .logo{
        width: 38%;
    }
    
    .logo img {
        height: 30px;
    }
    
    nav {
        width: 77%;
        display: flex;
        gap: 6%;
    }
    
    nav a {
        text-decoration: none;
        color: #444;
        font-weight: 500;
        position: relative;
        transition: color 0.3s;
    }
    
    nav a::after {
        content: '';
        position: absolute;
        width: 0;
        height: 2px;
        bottom: -5px;
        left: 0;
        background-color: #4CAF50;
        transition: width 0.3s ease;
    }
    
    nav a:hover {
        color: #2d7d2d;
    }
    
    nav a:hover::after {
        width: 100%;
    }

    
.profile-menu {
    position: relative;
    display: inline-block;
}

.profile-icon {
    width: 30px;
    height: 30px;
    border-radius: 50%;
    cursor: pointer;
}

.dropdown {
    display: none;
    position: absolute;
    top: 120%;
    right: 0;
    background-color: #fff;
    min-width: 150px;
    border-radius: 10px;
    box-shadow: 0 6px 16px rgba(0, 0, 0, 0.15);
    z-index: 2000;
    list-style: none;
    padding: 10px 0;
    transition: all 0.2s ease;
}

.dropdown.show {
    display: block;
}

.dropdown li {
    padding: 10px 20px;
}

.dropdown li a {
    color: #333;
    text-decoration: none;
    font-weight: 500;
}

.dropdown li:hover {
    background-color: #f2f2f2;
}

.profile-menu:hover .dropdown {
    display: block;
}

.footer {
        margin-top: auto;
        width: 100%;
        position: relative;
        bottom: 0;
}
body.cart-page main {
        min-height: calc(100vh - 400px); 
}
.social-links {
        display: flex;
        flex-wrap: wrap;
        gap: 12px;
        margin-top: 10px;
    }
    
    .social-icon {
        display: flex;
        align-items: center;
        text-decoration: none;
        color: #444;
        transition: color 0.3s ease;
        font-size: 14px;
    }
    
    .social-icon:hover {
        color: #4CAF50;
    }
    
    .social-icon i {
        font-size: 20px;
        margin-right: 8px;
    }


</style>

</head>
<body class="{% block body_class %}{% endblock %}">

    <!-- Header/Navbar -->
    <header>
        <div class="logo">
            <img src="{% static 'myapp/images/logo1.png' %}" alt="Smart Market Logo">
        </div>
        <nav>
            <a href="{% url 'home' %}">Home</a>
            <a href="{% url 'buy' %}">Buy Products</a>
            <a href="{% url 'rent_in' %}">Rent Tools</a>
            <a href="{% url 'crop_suggestion' %}">What to plant?</a>
            <a href="{% url 'predict' %}">When to sell?</a>
            <a href="{% url 'view_cart' %}">Cart</a>
            
            
            {% if user.is_authenticated %}
                <div class="profile-menu" id="profileMenu">
                    <img src="{% static 'myapp/images/profile.png' %}" alt="Profile Icon" class="profile-icon" id="profileIcon">
                    <ul class="dropdown" id="dropdownMenu">
                        <li><a href="{% url 'sell' %}">Sell</a></li>
                        <li><a href="{% url 'rent_out' %}">Rent Out</a></li>
                        <li><a href="{% url 'listings' %}">My Listings</a></li>
                        <li><a href="{% url 'my_orders' %}">My Orders</a></li>
                        <li><a href="{% url 'logout' %}">Logout</a></li>
                    </ul>
                </div>
            {% else %}
                <a href="{% url 'login' %}">Login</a>
            {% endif %}      
        </nav>
    </header>

    <!-- Main Content -->
    <main>
        {% block content %}
        <!-- Page-specific content goes here -->
        {% endblock %}
    </main>

    <!-- Footer -->
    <footer class="footer snap-section" id="footer"> 
        <div class="footer-container">
            <!-- Quick Links -->
            <div class="footer-column">
                <h3>Quick Links</h3>
                <ul>
                    <li><a href="#hero">Home</a></li>
                    <li><a href="#about">About Us</a></li>
                    <li><a href="#products-services">Features</a></li>
                    <li><a href="#testimonials">Testimonials</a></li>
                    <li><a href="#">Contact Us</a></li>
                    <li><a href="#">FAQ</a></li>
                </ul>
            </div>
            
            <!-- Contact Information -->
            <div class="footer-column">
                <h3>Contact Information</h3>
                <ul>
                    <li>üìû Phone: +91-1234567889</li>
                    <li>üìß Email: support@smartmarketapp.com</li>
                    <li>üè† Address: Smart Market Innovations Pvt Ltd, Bangalore, India</li>
                </ul>
            </div>
            
            <!-- Social Media Links -->
            <div class="footer-column">
                <h3>Follow Us</h3>
                <div class="social-links">
                    <a href="https://facebook.com/smartmarket" class="social-icon">
                        <i class="fab fa-facebook"></i> Facebook
                    </a>
                    <a href="https://youtube.com/smartmarket" class="social-icon">
                        <i class="fab fa-youtube"></i> YouTube
                    </a>
                    <a href="https://instagram.com/smartmarket" class="social-icon">
                        <i class="fab fa-instagram"></i> Instagram
                    </a>
                    <a href="https://linkedin.com/company/smartmarket" class="social-icon">
                        <i class="fab fa-linkedin"></i> LinkedIn
                    </a>
                </div>
            </div>
            
            <!-- App Download Section -->
            <div class="footer-column">
                <h3>Download the App</h3>
                <p>üì≤ Get Smart Market App today!</p>
                <div class="app-download-buttons">
                    <a href="#" class="download-btn">
                        <img src="{% static 'myapp/images/google.png' %}" alt="Google Play Store">
                    </a>
                    <a href="#" class="download-btn">
                        <img src="{% static 'myapp/images/appstore.png' %}" alt="Apple App Store">
                    </a>
                </div>
            </div>
        </div>

        <!-- Legal Links -->
        <div class="footer-legal">
            <div class="legal-links">
                <a href="#">Terms & Conditions</a>
                <a href="#">Privacy Policy</a>
                <a href="#">Refund & Cancellation Policy</a>
            </div>
            <div class="copyright">
                Empowering Farmers with AI | ¬© 2025 Smart Market App. All Rights Reserved.
            </div>
        </div>
    </footer>


    <!-- Cart overlay -->
<div class="cart-overlay" id="cartOverlay"></div>

<!-- Sliding cart panel -->
<div class="sliding-cart" id="slidingCart"></div>
    


    <script>
        // Add this script at the end of your base.html
        document.addEventListener('DOMContentLoaded', function() {
            const cartButton = document.getElementById('cartButton');
            if (cartButton) {
                cartButton.addEventListener('click', function(e) {
                    e.preventDefault();
                    // This will make an AJAX request to get cart data
                    // and then open the sliding cart
                    fetch('{% url "view_cart" %}')
                        .then(response => response.text())
                        .then(html => {
                            // Extract just the #slidingCart content
                            const parser = new DOMParser();
                            const doc = parser.parseFromString(html, 'text/html');
                            const cartContent = doc.getElementById('slidingCart');
                            
                            if (cartContent) {
                                // Update the sliding cart content
                                document.getElementById('slidingCart').innerHTML = cartContent.innerHTML;
                                // Open the cart
                                openCart();
                            }
                        })
                        .catch(error => {
                            console.error('Error loading cart:', error);
                        });
                });
            }
        });
        
        // Function to open cart
        function openCart() {
            const slidingCart = document.getElementById('slidingCart');
            const cartOverlay = document.getElementById('cartOverlay');
            
            if (slidingCart && cartOverlay) {
                slidingCart.classList.add('open');
                cartOverlay.style.display = 'block';
                document.body.style.overflow = 'hidden';
            }
        }
    </script>


</body>
</html>
